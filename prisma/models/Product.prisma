model Product {
  id          String   @id @default(cuid())
  name        String
  description String?
  sku         String   @unique
  price       Decimal  @db.Decimal(10, 2)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relationships
  inventoryItems InventoryItem[]
  orderItems     OrderItem[]

  @@map("products")
}

model InventoryItem {
  id           String @id @default(cuid())
  productId    String
  distributorId String
  stock        Int    @default(0)
  minStock     Int    @default(0)
  maxStock     Int?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  product     Product     @relation(fields: [productId], references: [id])
  distributor Distributor @relation(fields: [distributorId], references: [id])

  stockMovements StockMovement[]

  @@unique([productId, distributorId])
  @@map("inventory_items")
}

enum StockMovementType {
  INBOUND
  OUTBOUND
  ADJUSTMENT
  TRANSFER
}

model StockMovement {
  id              String            @id @default(cuid())
  inventoryItemId String
  type            StockMovementType
  quantity        Int
  previousStock   Int
  newStock        Int
  reason          String?
  orderId         String?
  createdAt       DateTime          @default(now())

  // Relationships
  inventoryItem InventoryItem @relation(fields: [inventoryItemId], references: [id])
  order         Order?        @relation(fields: [orderId], references: [id])

  @@map("stock_movements")
}