model Distributor {
  id        String   @id @default(cuid())
  name      String
  address   String?
  city      String?
  email     String?
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  administrators DistributorAdmin[]
  salespeople    Salesperson[]
  products       Product[]
  clients        ClientDistributor[]
  orders         Order[]

  @@map("distributors")
}

model ClientDistributor {
  id           String @id @default(cuid())
  distributorId String
  clientId     String

  // Client-specific pricing or terms
  discount        Decimal? @db.Decimal(5, 2)
  creditLimit     Decimal? @db.Decimal(10, 2)
  paymentTerms    String?  // "30 days", "cash", etc.

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  distributor Distributor @relation(fields: [distributorId], references: [id])
  client      FinalClient @relation(fields: [clientId], references: [id])

  @@unique([distributorId, clientId])
  @@map("client_distributors")
}

model Salesperson {
  id           String @id @default(cuid())
  userId       String @unique
  distributorId String
  territory    String?

  phone        String?  @unique

  // Relationships
  distributor Distributor @relation(fields: [distributorId], references: [id])
  orders      Order[]

  @@map("salespeople")
}

model FinalClient {
  id         String  @id @default(cuid())
  userId     String  @unique
  phone      String? @unique
  address    String?
  city       String?
  postalCode String?

  // Relationships
  orders            Order[]
  distributorClients ClientDistributor[]

  @@map("final_clients")
}