model Distributor {
  id        String   @id @default(cuid())
  name      String
  address   String?
  city      String?
  email     String?
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  userTenants      UserTenant[]
  salespeople      Salesperson[]
  products         Product[]
  inventoryItems   InventoryItem[]
  clients          Client[]
  orders           Order[]
  whatsappSessions WhatsAppSession[]
  invoices         Invoice[]
  deliveryNotes    DeliveryNote[]
  collections      Collection[]

  @@map("distributors")
}

model Client {
  id                    String  @id @default(cuid())
  distributorId         String
  name                  String
  phone                 String? @unique
  email                 String? @unique
  address               String?
  city                  String?
  postalCode            String?
  clientType            String?
  notes                 String?
  assignedSalespersonId String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  distributor         Distributor  @relation(fields: [distributorId], references: [id])
  assignedSalesperson Salesperson? @relation("AssignedSalesperson", fields: [assignedSalespersonId], references: [id])
  orders              Order[]
  invoices            Invoice[]
  deliveryNotes       DeliveryNote[]

  @@index([distributorId, createdAt])
  @@map("clients")
}

model Salesperson {
  id            String  @id @default(cuid())
  distributorId String
  name          String
  email         String
  territory     String?

  phone String? @unique

  // Relationships
  distributor     Distributor @relation(fields: [distributorId], references: [id])
  orders          Order[]
  assignedClients Client[]    @relation("AssignedSalesperson")
  collections     Collection[]

  @@map("salespeople")
}
